<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ V4.5 (Light Mode)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Sarabun', sans-serif;
            color: #ffffff;
            overflow-x: hidden;
        }
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(-45deg, #4b7bec, #a55eea, #f777e1, #23d5ab);
            background-size: 400% 400%;
            animation: gradient-animation 20s ease infinite;
        }
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 2rem;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        .form-input {
            @apply w-full px-4 py-3 font-bold bg-white border-2 border-transparent rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-400 transition-all duration-300 placeholder-gray-500;
            color: black;
        }
        .form-label {
            @apply block text-white text-sm font-bold mb-2;
        }
        .form-checkbox {
            @apply w-5 h-5 text-pink-500 bg-gray-100 border-gray-300 rounded focus:ring-pink-500 focus:ring-2;
        }
        /* Scroll Animation */
        .scroll-animate {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .scroll-animate.visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Level Cards */
        .level-card {
            @apply p-6 rounded-2xl text-white transition-all duration-500 shadow-2xl;
        }
        .level-struggle { background: linear-gradient(135deg, #ef4444, #b91c1c); }
        .level-survival { background: linear-gradient(135deg, #f97316, #c2410c); }
        .level-protection { background: linear-gradient(135deg, #3b82f6, #1d4ed8); }
        .level-comfort { background: linear-gradient(135deg, #10b981, #047857); }
        .level-freedom { background: linear-gradient(135deg, #8b5cf6, #5b21b6); }
        .level-abundance { background: linear-gradient(135deg, #d946ef, #a21caf); }
        
        .donut-chart {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 50%;
        }
        .donut-chart-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="animated-bg"></div>
    <div class="container mx-auto p-4 md:p-8 relative z-10">

        <!-- Header & Dashboard -->
        <section class="min-h-screen flex flex-col items-center justify-center text-center py-16 scroll-animate">
            <h1 class="text-5xl md:text-7xl font-extrabold mb-4 text-shadow">‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô...<br>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h1>
            <p class="text-xl md:text-2xl mb-8 opacity-90">‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏á‡∏Ñ‡∏±‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡πâ‡∏≤‡∏ß‡∏™‡∏π‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á</p>
            
            <div class="w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                <div id="wealthLevelCard" class="level-card level-struggle">
                    <h2 class="text-2xl font-bold mb-2">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏á‡∏Ñ‡∏±‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                    <div class="text-center py-4">
                        <div id="levelIcon" class="text-6xl mb-2">‚è≥</div>
                        <h3 id="levelName" class="text-2xl font-bold">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
                        <p id="levelDescription" class="mt-2 text-sm opacity-90">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                    </div>
                </div>
                <div class="glass-card">
                     <h2 class="text-2xl font-bold text-white mb-4">ü©∫ ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</h2>
                     <div class="flex items-center justify-around gap-4">
                        <div class="text-center">
                            <p class="font-bold">‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</p>
                            <div id="incomeSourceChart" class="donut-chart mx-auto mt-2 bg-white/20">
                                <div class="donut-chart-center">
                                    <span class="text-2xl font-bold" id="totalIncomeDisplay">0</span>
                                    <span class="text-xs block">‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
                                </div>
                            </div>
                        </div>
                        <div class="space-y-4 text-sm w-full">
                            <div>
                                <div class="flex justify-between mb-1"><span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏≠‡∏î (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</span><span id="survivalRatio" class="font-bold">0.0</span></div>
                                <div class="w-full bg-white/20 rounded-full h-2.5"><div id="survivalRatioBar" class="bg-blue-300 h-2.5 rounded-full" style="width: 0%"></div></div>
                            </div>
                             <div>
                                <div class="flex justify-between mb-1"><span>‡∏†‡∏≤‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ (%)</span><span id="debtRatio" class="font-bold">0.0</span></div>
                                <div class="w-full bg-white/20 rounded-full h-2.5"><div id="debtRatioBar" class="bg-pink-400 h-2.5 rounded-full" style="width: 0%"></div></div>
                            </div>
                        </div>
                     </div>
                </div>
            </div>
             <a href="#income-section" class="mt-16 animate-bounce">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                </svg>
            </a>
        </section>

        <!-- Income Section -->
        <section id="income-section" class="py-16 scroll-animate">
            <div class="glass-card max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8">üí∞ 1. ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö (‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div><label for="incomeE" class="form-label">‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á (E)</label><input type="number" id="incomeE" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="incomeS" class="form-label">‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (S)</label><input type="number" id="incomeS" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="incomeB" class="form-label">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à (B)</label><input type="number" id="incomeB" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="incomeI" class="form-label">‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô (I - Passive)</label><input type="number" id="incomeI" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                </div>
                <div class="mt-6 pt-4 border-t border-white/20 text-right"><span class="text-lg">‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö: </span><span id="totalIncomeDisplayCard" class="text-xl font-bold">0 ‡∏ø</span></div>
            </div>
        </section>

        <!-- Expense Section -->
        <section class="py-16 scroll-animate">
            <div class="glass-card max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8">üí∏ 2. ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ (‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div><label for="expHousing" class="form-label">‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢</label><input type="number" id="expHousing" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="expFood" class="form-label">‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£</label><input type="number" id="expFood" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="expTransport" class="form-label">‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</label><input type="number" id="expTransport" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="expPersonal" class="form-label">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</label><input type="number" id="expPersonal" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="expDebt" class="form-label">‡∏ä‡∏≥‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ</label><input type="number" id="expDebt" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="expSaving" class="form-label">‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°/‡∏•‡∏á‡∏ó‡∏∏‡∏ô</label><input type="number" id="expSaving" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                </div>
                <div class="mt-6 pt-4 border-t border-white/20 text-right"><span class="text-lg">‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢: </span><span id="totalExpenseDisplayCard" class="text-xl font-bold">0 ‡∏ø</span></div>
            </div>
        </section>
        
        <!-- Assets & Liabilities Section -->
        <section class="py-16 scroll-animate">
            <div class="glass-card max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8">üè¶ 3. ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-center">‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                        <div class="space-y-4">
                            <div><label for="emergencyFund" class="form-label">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</label><input type="number" id="emergencyFund" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                            <div><label for="assetLiquid" class="form-label">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î/‡∏≠‡∏≠‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÜ</label><input type="number" id="assetLiquid" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                            <div><label for="assetInvest" class="form-label">‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏•‡∏á‡∏ó‡∏∏‡∏ô</label><input type="number" id="assetInvest" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                            <div><label for="assetPersonal" class="form-label">‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</label><input type="number" id="assetPersonal" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-white/20 text-right"><span class="text-lg">‡∏£‡∏ß‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô: </span><span id="totalAssetsDisplayCard" class="text-xl font-bold">0 ‡∏ø</span></div>
                    </div>
                     <div>
                        <h3 class="text-xl font-semibold mb-4 text-center">‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                        <div class="space-y-4">
                            <div><label for="debtShort" class="form-label">‡∏´‡∏ô‡∏µ‡πâ‡∏£‡∏∞‡∏¢‡∏∞‡∏™‡∏±‡πâ‡∏ô</label><input type="number" id="debtShort" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                            <div><label for="debtLong" class="form-label">‡∏´‡∏ô‡∏µ‡πâ‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß</label><input type="number" id="debtLong" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-white/20 text-right"><span class="text-lg">‡∏£‡∏ß‡∏°‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô: </span><span id="totalDebtsDisplayCard" class="text-xl font-bold">0 ‡∏ø</span></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tax Deduction Section -->
        <section class="py-16 scroll-animate">
            <div class="glass-card max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8">üßæ 4. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏µ (‡∏ï‡πà‡∏≠‡∏õ‡∏µ)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div><label for="deductSocialSecurity" class="form-label">‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏° (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 9,000)</label><input type="number" id="deductSocialSecurity" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="deductLifeInsurance" class="form-label">‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï/‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1 ‡πÅ‡∏™‡∏ô)</label><input type="number" id="deductLifeInsurance" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="deductHomeLoan" class="form-label">‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ö‡πâ‡∏≤‡∏ô (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1 ‡πÅ‡∏™‡∏ô)</label><input type="number" id="deductHomeLoan" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="deductSSF" class="form-label">SSF (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2 ‡πÅ‡∏™‡∏ô)</label><input type="number" id="deductSSF" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="deductRMF" class="form-label">RMF (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5 ‡πÅ‡∏™‡∏ô)</label><input type="number" id="deductRMF" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                    <div><label for="deductDonation" class="form-label">‡πÄ‡∏á‡∏¥‡∏ô‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ</label><input type="number" id="deductDonation" class="form-input" placeholder="0" oninput="calculateAll()"></div>
                </div>
            </div>
        </section>

        <!-- Protection Plan Section -->
        <section class="py-16 scroll-animate">
            <div class="glass-card max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8">üõ°Ô∏è 5. ‡πÅ‡∏ú‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</h2>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 text-center">
                    <div class="flex items-center justify-center flex-col">
                        <label for="hasLifeInsurance" class="form-label mb-3">‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</label>
                        <input type="checkbox" id="hasLifeInsurance" class="form-checkbox" oninput="calculateAll()">
                    </div>
                    <div class="flex items-center justify-center flex-col">
                        <label for="hasHealthInsurance" class="form-label mb-3">‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</label>
                        <input type="checkbox" id="hasHealthInsurance" class="form-checkbox" oninput="calculateAll()">
                    </div>
                    <div class="flex items-center justify-center flex-col">
                        <label for="hasRetirementPlan" class="form-label mb-3">‡πÅ‡∏ú‡∏ô‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì</label>
                        <input type="checkbox" id="hasRetirementPlan" class="form-checkbox" oninput="calculateAll()">
                    </div>
                </div>
            </div>
        </section>

        <!-- Final Result Section -->
        <section class="py-16 scroll-animate">
             <div class="text-center">
                <h2 class="text-4xl font-bold mb-8">6. ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</h2>
                <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="glass-card text-left">
                        <h3 class="text-2xl font-bold mb-4">üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</h3>
                        <p id="nextStepDescription" class="text-lg opacity-90">-</p>
                    </div>
                    <div class="glass-card text-left">
                        <h3 class="text-2xl font-bold mb-4">üßæ ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏©‡∏µ</h3>
                         <div class="space-y-2">
                            <div class="flex justify-between"><span>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏û‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô/‡∏õ‡∏µ:</span><span id="taxableIncomeYearly" class="font-bold">0 ‡∏ø</span></div>
                            <div class="flex justify-between"><span>‡∏´‡∏±‡∏Å‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏£‡∏ß‡∏°:</span><span id="totalDeductionsDisplay" class="font-bold">0 ‡∏ø</span></div>
                            <div class="flex justify-between"><span>‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏™‡∏∏‡∏ó‡∏ò‡∏¥:</span><span id="netTaxableIncome" class="font-bold">0 ‡∏ø</span></div>
                            <hr class="border-white/20 my-2"/>
                            <div class="flex justify-between text-lg">
                                <span class="font-bold">‡∏†‡∏≤‡∏©‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞/‡∏õ‡∏µ:</span>
                                <span id="estimatedTax" class="font-bold">0 ‡∏ø</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script>
        // --- SCROLL ANIMATION ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.scroll-animate').forEach(el => {
            observer.observe(el);
        });

        // --- UTILITY FUNCTIONS ---
        const getVal = id => parseFloat(document.getElementById(id).value) || 0;
        const getCheck = id => document.getElementById(id).checked;
        const setHtml = (id, text) => {
            const el = document.getElementById(id);
            if (el) el.innerHTML = text;
        };
        const formatCurrency = (num) => num.toLocaleString('th-TH', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
        const formatCurrencyWithSymbol = (num) => `${formatCurrency(num)} ‡∏ø`;

        // --- DATA STRUCTURE FOR WEALTH LEVELS ---
        const wealthLevels = {
            struggle: { name: "Financial Struggle - ‡∏î‡∏¥‡πâ‡∏ô‡∏£‡∏ô", icon: "üò•", description: "‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ä‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô", nextStep: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏¥‡∏ô‡∏±‡∏¢! ‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏à‡πà‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á ‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô" },
            survival: { name: "Financial Survival - ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏≠‡∏î", icon: "üòå", description: "‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏Å‡πá‡∏ö ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô", nextStep: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ 3-6 ‡πÄ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á" },
            protection: { name: "Financial Protection - ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢", icon: "üõ°Ô∏è", description: "‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡πâ‡∏ß", nextStep: "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏π‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏á‡∏Ñ‡∏±‡πà‡∏á! ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô 2 ‡πÄ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ó‡∏∏‡∏ô" },
            comfort: { name: "Financial Comfort - ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á", icon: "üòä", description: "‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡πÄ‡∏ó‡πà‡∏≤ ‡πÅ‡∏•‡∏∞‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠", nextStep: "‡∏™‡∏£‡πâ‡∏≤‡∏á Passive Income! ‡∏°‡∏∏‡πà‡∏á‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ó‡∏ô‡πÄ‡∏£‡∏≤" },
            freedom: { name: "Financial Freedom - ‡∏≠‡∏¥‡∏™‡∏£‡∏†‡∏≤‡∏û", icon: "üéâ", description: "Passive Income ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ 2 ‡πÄ‡∏ó‡πà‡∏≤ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡πá‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ä‡πâ", nextStep: "‡∏™‡∏π‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πâ‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠! ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÉ‡∏´‡πâ‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô ‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏á‡∏Ñ‡∏±‡πà‡∏á" },
            abundance: { name: "Financial Abundance - ‡∏•‡πâ‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠", icon: "üëë", description: "‡∏°‡∏µ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡πÅ‡∏•‡∏∞ Passive Income ‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡∏û‡∏≠‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï", nextStep: "‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤! ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏á‡∏Ñ‡∏±‡πà‡∏á‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏ù‡∏±‡∏ô" }
        };

        // --- MAIN CALCULATION LOGIC ---
        function calculateAll() {
            // 1. Get all input values
            const incomeE = getVal('incomeE');
            const incomeS = getVal('incomeS');
            const incomeB = getVal('incomeB');
            const incomeI = getVal('incomeI');
            const expHousing = getVal('expHousing');
            const expFood = getVal('expFood');
            const expTransport = getVal('expTransport');
            const expPersonal = getVal('expPersonal');
            const expDebt = getVal('expDebt');
            const expSaving = getVal('expSaving');
            const emergencyFund = getVal('emergencyFund');
            const assetLiquid = getVal('assetLiquid');
            const assetInvest = getVal('assetInvest');
            const assetPersonal = getVal('assetPersonal');
            const debtShort = getVal('debtShort');
            const debtLong = getVal('debtLong');
            const hasLifeInsurance = getCheck('hasLifeInsurance');
            const hasHealthInsurance = getCheck('hasHealthInsurance');
            const hasRetirementPlan = getCheck('hasRetirementPlan');
            
            const livingExpense = expHousing + expFood + expTransport + expPersonal + expDebt;
            const hasFullProtection = hasLifeInsurance && hasHealthInsurance && hasRetirementPlan;

            // 2. Calculate totals
            const totalIncome = incomeE + incomeS + incomeB + incomeI;
            const totalExpense = livingExpense + expSaving;
            const totalLiquidAssets = emergencyFund + assetLiquid;
            const totalAssets = totalLiquidAssets + assetInvest + assetPersonal;
            const totalDebts = debtShort + debtLong;
            const netWorth = totalAssets - totalDebts;

            // 3. Determine Wealth Level
            let currentLevelKey = 'struggle';
            if (totalIncome > 0 || totalExpense > 0) {
                 if (incomeI > livingExpense * 5 && livingExpense > 0 && netWorth > 30000000) {
                    currentLevelKey = 'abundance';
                } else if (incomeI >= livingExpense * 2 && livingExpense > 0) {
                    currentLevelKey = 'freedom';
                } else if (totalIncome >= livingExpense * 2 && livingExpense > 0 && assetInvest > 0) {
                    currentLevelKey = 'comfort';
                } else if (totalIncome > livingExpense && hasFullProtection) {
                    currentLevelKey = 'protection';
                } else if (totalIncome > livingExpense) {
                    currentLevelKey = 'survival';
                }
            }
            
            updateWealthLevelUI(currentLevelKey);
            
            // 4. Calculate Financial Health Ratios and Update Totals
            calculateFinancialHealth(totalLiquidAssets, livingExpense, totalDebts, totalAssets);
            updateTotals(totalIncome, totalExpense, totalAssets, totalDebts);

            // 5. Update Income Source Chart
            updateIncomeChart(incomeE, incomeS, incomeB, incomeI, totalIncome);

            // 6. Calculate Tax
            calculateTax(totalIncome);
        }
        
        // --- UI UPDATE FUNCTIONS ---
        function updateWealthLevelUI(levelKey) {
            const level = wealthLevels[levelKey] || wealthLevels.struggle;
            const card = document.getElementById('wealthLevelCard');
            card.className = 'level-card';
            card.classList.add(level.className);
            setHtml('levelIcon', level.icon);
            setHtml('levelName', level.name);
            setHtml('levelDescription', level.description);
            setHtml('nextStepDescription', level.nextStep);
        }

        function calculateFinancialHealth(liquidAssets, livingExpenses, totalDebts, totalAssets) {
            const survivalRatio = livingExpenses > 0 ? liquidAssets / livingExpenses : 0;
            setHtml('survivalRatio', survivalRatio.toFixed(1));
            document.getElementById('survivalRatioBar').style.width = `${Math.min((survivalRatio / 6) * 100, 100)}%`;

            const debtRatio = totalAssets > 0 ? (totalDebts / totalAssets) * 100 : 0;
            setHtml('debtRatio', debtRatio.toFixed(1));
            document.getElementById('debtRatioBar').style.width = `${Math.min(debtRatio, 100)}%`;
        }

        function updateTotals(totalIncome, totalExpense, totalAssets, totalDebts) {
            setHtml('totalIncomeDisplayCard', formatCurrencyWithSymbol(totalIncome));
            setHtml('totalExpenseDisplayCard', formatCurrencyWithSymbol(totalExpense));
            setHtml('totalAssetsDisplayCard', formatCurrencyWithSymbol(totalAssets));
            setHtml('totalDebtsDisplayCard', formatCurrencyWithSymbol(totalDebts));
        }
        
        function updateIncomeChart(e, s, b, i, total) {
            setHtml('totalIncomeDisplay', formatCurrency(total));
            const chart = document.getElementById('incomeSourceChart');
            if (total === 0) {
                chart.style.background = 'rgba(255,255,255,0.2)';
                return;
            }
            const e_pct = (e / total) * 100;
            const s_pct = (s / total) * 100;
            const b_pct = (b / total) * 100;
            const i_pct = (i / total) * 100;

            const gradient = `conic-gradient(
                #34d399 ${e_pct}%, 
                #fbbf24 ${e_pct}% ${e_pct + s_pct}%, 
                #60a5fa ${e_pct + s_pct}% ${e_pct + s_pct + b_pct}%, 
                #c084fc ${e_pct + s_pct + b_pct}% 100%
            )`;
            chart.style.background = gradient;
        }

        function calculateTax(monthlyIncome) {
            const annualIncome = monthlyIncome * 12;
            
            // Get deductions from form
            const deductSocialSecurity = Math.min(getVal('deductSocialSecurity'), 9000);
            const deductLifeInsurance = Math.min(getVal('deductLifeInsurance'), 100000);
            const deductHomeLoan = Math.min(getVal('deductHomeLoan'), 100000);
            const deductSSF = Math.min(getVal('deductSSF'), 200000);
            const deductRMF = Math.min(getVal('deductRMF'), 500000);
            const deductDonation = getVal('deductDonation');

            // Standard deductions
            const expensesDeduction = Math.min(annualIncome * 0.5, 100000);
            const personalAllowance = 60000;
            
            const totalDeductions = personalAllowance + expensesDeduction + deductSocialSecurity + deductLifeInsurance + deductHomeLoan + deductSSF + deductRMF + deductDonation;
            
            let netTaxableIncome = annualIncome - totalDeductions;
            if (netTaxableIncome < 0) netTaxableIncome = 0;

            let tax = 0;
            const tempIncome = netTaxableIncome;

            if (tempIncome > 5000000) tax += (tempIncome - 5000000) * 0.35;
            if (tempIncome > 2000000) tax += (Math.min(tempIncome, 5000000) - 2000000) * 0.30;
            if (tempIncome > 1000000) tax += (Math.min(tempIncome, 2000000) - 1000000) * 0.25;
            if (tempIncome > 750000) tax += (Math.min(tempIncome, 1000000) - 750000) * 0.20;
            if (tempIncome > 500000) tax += (Math.min(tempIncome, 750000) - 500000) * 0.15;
            if (tempIncome > 300000) tax += (Math.min(tempIncome, 500000) - 300000) * 0.10;
            if (tempIncome > 150000) tax += (Math.min(tempIncome, 300000) - 150000) * 0.05;
            
            setHtml('taxableIncomeYearly', formatCurrencyWithSymbol(annualIncome));
            setHtml('totalDeductionsDisplay', formatCurrencyWithSymbol(totalDeductions));
            setHtml('netTaxableIncome', formatCurrencyWithSymbol(netTaxableIncome));
            setHtml('estimatedTax', formatCurrencyWithSymbol(tax));
        }

        // Initial calculation on page load
        window.onload = () => {
            document.querySelector('.scroll-animate').classList.add('visible'); // Show first section immediately
            calculateAll();
        };
    </script>
</body>
</html>
